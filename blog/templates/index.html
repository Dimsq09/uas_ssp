{% extends "base.html" %} {% load static %} {% block content %}


<nav class="navbar navbar-expand-lg navbar-dark bg-home sticky-top">
  <div class="container">
    <a class="navbar-brand text-green-bright fw-bold" href="#">Dhimaz Satrya.</a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="#about">About me</a></li>
        <li class="nav-item">
          <a class="nav-link" href="#projects">Projects</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#certificates">Certificates</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#contact">Contact us</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<section id="home" class="section">
  <div class="container">
    <h1 class="hero-title">
      <span id="typed-text"></span><span class="cursor">|</span>
    </h1>
    <h2 class="text-secondary mt-3">I play games, I code, I eat.</h2>
  </div>

  <div class="social-sidebar">
    <a href="https://youtube.com" target="_blank"
      ><i class="bi bi-youtube"></i
    ></a>
    <a href="https://linkedin.com" target="_blank"
      ><i class="bi bi-linkedin"></i
    ></a>
    <a href="https://twitter.com" target="_blank"
      ><i class="bi bi-twitter"></i
    ></a>
    <a href="https://facebook.com" target="_blank"
      ><i class="bi bi-facebook"></i
    ></a>
  </div>
</section>

<section id="about" class="section bg-home text-white">
  <div class="container py-5">
    <div class="row align-items-center">
      <div class="col-md-7">
        {% if profile %}
          <h2 class="section-title">{{ profile.judul }}</h2>
          <p class="fs-5">
            Halo! Saya <strong>{{ profile.semester }}</strong> jurusan
            <strong>{{ profile.jurusan }}</strong> di
            <span class="text-green-bright">{{ profile.universitas }}</span> {{ profile.deskripsi_utama }}
          </p>
          <p class="fs-5">
            {{ profile.deskripsi_skill }}
          </p>
          <div class="row fs-5">
            <div class="col-6 col-md-4">
              <ul class="list-unstyled">
                {% for tech in profile.get_teknologi_kiri_list %}
                  <li>▸ {{ tech }}</li>
                {% endfor %}
              </ul>
            </div>
            <div class="col-6 col-md-4">
              <ul class="list-unstyled">
                {% for tech in profile.get_teknologi_kanan_list %}
                  <li>▸ {{ tech }}</li>
                {% endfor %}
              </ul>
            </div>
          </div>
          <p class="mt-3 fs-5">
            {{ profile.deskripsi_hobi }}
          </p>
        {% else %}
          <h2 class="section-title">Tentang Saya</h2>
          <div class="text-center py-5">
            <i class="bi bi-person-plus display-1 text-info mb-3"></i>
            <h4 class="text-light mb-3">Halaman profil belum ditambahkan</h4>
            <p class="text-muted mb-4">Silahkan menambahkan profil terlebih dahulu</p>
          </div>
        {% endif %}
        
        <!-- Tombol Edit Profile untuk Admin -->
        {% if user.is_staff %}
          <div class="mt-4">
            {% if profile %}
              <a href="/admin/profil/profile/{{ profile.id }}/change/" target="_blank" class="btn btn-outline-warning">
                <i class="bi bi-pencil-square me-2"></i>Edit Profil
              </a>
            {% else %}
              <a href="/admin/profil/profile/add/" target="_blank" class="btn btn-outline-success">
                <i class="bi bi-plus-circle me-2"></i>Tambah Profil
              </a>
            {% endif %}
          </div>
        {% endif %}
      </div>
      <div class="col-md-5 text-center">
        {% if profile and profile.foto_profil %}
          <img
            src="{{ profile.foto_profil.url }}"
            alt="Profile"
            class="img-fluid about-img"
          />
        {% else %}
          <img
            src="{% static 'assets/image/profil.png' %}"
            alt="Profile"
            class="img-fluid about-img"
          />
        {% endif %}
      </div>
    </div>
  </div>
</section>




<section id="projects" class="pt-5 pb-5 bg-home">
  <div class="container text-light">
    <h2 class="section-title">My Projects</h2>

    <!-- Carousel/Showcase -->
    <div
      class="showcase mt-4 mb-5 rounded shadow-lg bg-dark position-relative overflow-hidden"
      style="height: 360px"
    >
      {% if featured_projects %}
        <img
          id="showcase-img"
          src="{{ featured_projects.0.image.url }}"
          class="w-100 h-100 object-fit-cover position-absolute top-0 start-0"
          alt="{{ featured_projects.0.title }}"
        />

        <div
          class="position-absolute top-0 start-0 w-100 h-100"
          style="background: rgba(0, 0, 0, 0.5)"
        ></div>

        <div
          class="position-absolute top-50 start-50 translate-middle text-center text-light px-3"
        >
          <h4
            id="showcase-title"
            class="text-info fw-bold mb-2 text-green-bright"
          >
            {{ featured_projects.0.title }}
          </h4>
          <p id="showcase-description" class="mb-3 small">
            {{ featured_projects.0.description|truncatewords:20 }}
          </p>
          <p id="showcase-technologies" class="text-green-bright small mb-3">
            {{ featured_projects.0.technologies }}
          </p>

          {% if featured_projects.0.github_link %}
          <a
            id="showcase-link"
            href="{{ featured_projects.0.github_link }}"
            target="_blank"
            class="btn btn-outline-info btn-sm"
          >
            <i class="bi bi-github me-1"></i> View on GitHub
          </a>
          {% endif %}
        </div>

        {% if featured_projects|length > 1 %}
        <button
          onclick="prevProject()"
          class="btn btn-outline-info position-absolute top-50 start-0 translate-middle-y ms-2"
        >
          <i class="bi bi-chevron-left"></i>
        </button>
        <button
          onclick="nextProject()"
          class="btn btn-outline-info position-absolute top-50 end-0 translate-middle-y me-2"
        >
          <i class="bi bi-chevron-right"></i>
        </button>
        {% endif %}
      {% else %}
        <!-- Fallback when no featured projects -->
        <div class="d-flex align-items-center justify-content-center h-100">
          <div class="text-center">
            <i class="bi bi-folder-plus display-1 text-info mb-3"></i>
            <h4 class="text-light">No Featured Projects Yet</h4>
            <p class="text-muted">Add some projects and mark them as featured to display here</p>
          </div>
        </div>
      {% endif %}
    </div>

    <!-- Hidden JSON data for JavaScript -->
    <script id="featured-projects-data" type="application/json">
    [
      {% for project in featured_projects %}
      {
        "title": "{{ project.title|escapejs }}",
        "description": "{{ project.description|truncatewords:20|escapejs }}",
        "image": "{{ project.image.url }}",
        "github_link": "{{ project.github_link|default:'' }}",
        "technologies": "{{ project.technologies|escapejs }}"
      }{% if not forloop.last %},{% endif %}
      {% endfor %}
    ]
    </script>

    <!-- Admin Controls -->
    {% if user.is_staff %}
    <div class="text-center">
      <div class="btn-group" role="group">
        <a href="/admin/profil/project/add/" target="_blank" class="btn btn-outline-success">
          <i class="bi bi-plus-circle me-2"></i>Add New Project
        </a>
        <a href="/admin/profil/project/" target="_blank" class="btn btn-outline-info">
          <i class="bi bi-gear me-2"></i>Manage Projects
        </a>
      </div>
      <p class="text-muted mt-2 small">
        <i class="bi bi-info-circle me-1"></i>
        Mark projects as "Featured" to display them in the carousel above
      </p>
    </div>
    {% else %}
    <!-- Message for non-admin users -->
    <div class="text-center">
      <p class="text-muted">
        <i class="bi bi-code-slash me-2"></i>
        More projects coming soon! Check back later for updates.
      </p>
    </div>
    {% endif %}
  </div>
</section>

<section id="certificates" class="section bg-home text-white">
  <div class="container py-5">
    <h2 class="section-title">Beberapa Sertifikat yang Saya Dapatkan</h2>

    <div class="row g-4 mt-4">
      {% for certificate in certificates %}
      <div class="col-md-4">
        <div class="card bg-dark text-light h-100 border border-info shadow">
          <img
            src="{{ certificate.image.url }}"
            class="card-img-top"
            alt="{{ certificate.title }}"
            style="height: 200px; object-fit: cover;"
          />
          <div class="card-body">
            <h5 class="card-title text-light">{{ certificate.title }}</h5>
            <p class="card-text small">{{ certificate.organization }}</p>
            <p class="card-text small text-muted">{{ certificate.date_earned|date:"F Y" }}</p>
            
            <!-- Tombol Edit/Admin -->
            <div class="d-flex gap-2 mt-3">
              {% if certificate.certificate_file %}
              <a
                href="{{ certificate.certificate_file.url }}"
                target="_blank"
                class="btn btn-outline-info btn-sm"
                >View Certificate</a
              >
              {% endif %}
              
              <!-- Tombol Edit untuk Admin -->
              {% if user.is_staff %}
              <a
                href="/admin/app_name/certificate/{{ certificate.id }}/change/"
                target="_blank"
                class="btn btn-outline-warning btn-sm"
                title="Edit Certificate"
              >
                <i class="bi bi-pencil-square"></i>
              </a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      {% empty %}
      <!-- Fallback jika tidak ada certificate di database -->
      <div class="d-flex align-items-center justify-content-center h-100">
          <div class="text-center">
            <i class="bi bi-folder-plus display-1 text-info mb-3"></i>
            <h4 class="text-light">No Featured Sertificated</h4>
            <p class="text-muted">Add some Sertificated and mark them as featured to display here</p>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Tombol Admin untuk menambah certificate -->
    {% if user.is_staff %}
    <div class="text-center mt-4">
      <a href="/admin/profil/certificate/add/" target="_blank" class="btn btn-outline-success">
        <i class="bi bi-plus-circle me-2"></i>Add New Certificate
      </a>
    </div>
    {% endif %}
  </div>
</section>

<section id="contact" class="section bg-home text-white py-5">
  <div class="container">
    <h2 class="section-title">Hubungi saya</h2>

    <form
      class="needs-validation mt-4"
      novalidate
      method="POST"
      action="{% url 'contact' %}"
    >
      {% csrf_token %}
      <div class="mb-3">
        <label for="id_nama" class="form-label">Name</label>
        <input
          type="text"
          class="form-control"
          id="id_nama"
          name="nama"
          required
        />
        <div class="invalid-feedback">Please enter your name.</div>
      </div>
      <div class="mb-3">
        <label for="id_email" class="form-label">Email</label>
        <input
          type="email"
          class="form-control"
          id="id_email"
          name="email"
          required
        />
        <div class="invalid-feedback">Please enter a valid email.</div>
      </div>
      <div class="mb-3">
        <label for="id_subjek" class="form-label">Subject</label>
        <input
          type="text"
          class="form-control"
          id="id_subjek"
          name="subjek"
          required
        />
        <div class="invalid-feedback">Please enter the subject.</div>
      </div>
      <div class="mb-3">
        <label for="id_pesan" class="form-label">Message</label>
        <textarea
          class="form-control"
          id="id_pesan"
          name="pesan"
          rows="4"
          required
        ></textarea>
        <div class="invalid-feedback">Please enter your message.</div>
      </div>
      <button type="submit" class="btn btn-outline-info fw-bold">
        Send Message
      </button>
    </form>
  </div>
</section>

<section id="footer" class="bg-dark text-white py-5">
      <div class="container">
        <!-- Lokasi Kami -->
        <div class="row mb-4">
          <div class="col-md-6">
            <h4 class="fw-bold">Lokasi Kami</h4>
            <p>Lokasi produksi kami.</p>
            <p>
              <i class="fas fa-map-marker-alt"></i>Jl. rembuksari no 63 mojolangu kec lowokwaru, kab Malang, Jawa Timur
            </p>
          </div>
          <div class="col-md-6">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3951.5798308447693!2d112.62501537588827!3d-7.93887387907263!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2dd629e71e40304b%3A0x53d92b3243e471bf!2sJl.%20Rembuksari%20No.63%2C%20Mojolangu%2C%20Kec.%20Lowokwaru%2C%20Kota%20Malang%2C%20Jawa%20Timur%2065142!5e0!3m2!1sid!2sid!4v1737489129112!5m2!1sid!2sid" 
              width="100%"
              height="250"
              style="border:0;"
              allowfullscreen=""
              loading="lazy"
            ></iframe>
          </div>
        </div>
    
        <!-- Footer Links -->
        <div class="row">
          <div class="col-md-3">
            <h5 class="fw-bold">Navigation</h5>
            <ul class="list-unstyled">
              <li><a href="#" class="text-white text-decoration-none">Homes</a></li>
              <li><a href="#" class="text-white text-decoration-none">Product</a></li>
              <li><a href="#" class="text-white text-decoration-none">Login</a></li>
              <li><a href="#" class="text-white text-decoration-none">Contact</a></li>
            </ul>
          </div>
          <div class="col-md-3">
            <h5 class="fw-bold">Support</h5>
            <p><a href="#" class="text-white text-decoration-none">Whatsapp</a></p>
          </div>
          <div class="col-md-3">
            <h5 class="fw-bold">Contact</h5>
            <p><i class="fas fa-instagram"></i> Dhimaz</p>
            <p><i class="fas fa-phone"></i> +62 858 1685 3655</p>
            <p><i class="fas fa-map-marker-alt"></i> Jl. rembuksari no 63 mojolangu kec lowokwaru, kab Malang, Jawa Timur</p>
          </div>
            <div class="mt-3">
              <a href="#" class="text-white me-2"><i class="fab fa-instagram"></i></a>
              <a href="#" class="text-white me-2"><i class="fab fa-tiktok"></i></a>
              <a href="#" class="text-white"><i class="fas fa-shopping-bag"></i></a>
            </div>
          </div>
        </div>
      </div>
    
      <!-- Footer Bottom -->
      <div class="text-center py-3 mt-4 border-top border-secondary">
       <p class="copyrigth">&copy;DHIMAZ SATRYA | ILIKECHOCOCAKE</p>
      </div>
    </section>



{% endblock %}

